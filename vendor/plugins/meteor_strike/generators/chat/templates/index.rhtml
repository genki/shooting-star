<%% form_remote_for(:chat, :url => {:action => 'talk'}) do |f| %>
  <%%= f.text_field :name %>
  <%%= submit_tag 'Talk' %><br />
  <%%= f.text_area :message, :rows => 3 %>
<%% end %>
<ul id="chat-list">
<%% for chat in @chats %>
  <%%= render_component :action => 'show', :id => chat.id %>
<%% end %>
</ul>
<%%= meteor_strike '<%= file_name %>', :event => %Q{
  switch(params.event){
  case 'init':
    new Ajax.Updater('chat-list', #{url_for(:action => 'connect').to_json}, {
      insertion: Insertion.Top, parameters: {client_type: params.type}});
    break;
  }
} %>
